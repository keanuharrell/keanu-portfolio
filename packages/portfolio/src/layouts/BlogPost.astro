---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import FormattedDate from '../components/FormattedDate.astro';
import '../styles/global-modern.css';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en">
	<head>
		<BaseHead title={title} description={description} />
	</head>

	<body>
		<!-- Background layers -->
		<div class="bg-layer bg-gradient"></div>
		<div class="bg-layer floating-shapes">
			<div class="shape shape-1"></div>
			<div class="shape shape-2"></div>
			<div class="shape shape-3"></div>
		</div>

		<!-- Navigation -->
		<nav class="post-nav">
			<a href="/blog" class="back-blog">
				<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<path d="M19 12H5M12 19l-7-7 7-7"/>
				</svg>
				<span>Back to Blog</span>
			</a>
			<a href="/" class="back-home">
				<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
				</svg>
				<span>Home</span>
			</a>
		</nav>

		<div class="container">
			<main class="post-main">
				<article class="post-article">
					{heroImage && (
						<div class="hero-image">
							<Image width={800} height={400} src={heroImage} alt="" />
						</div>
					)}
					
					<header class="post-header">
						<div class="post-meta">
							<FormattedDate date={pubDate} />
							{updatedDate && (
								<span class="updated">
									Updated <FormattedDate date={updatedDate} />
								</span>
							)}
						</div>
						<h1 class="post-title">{title}</h1>
						{description && <p class="post-description">{description}</p>}
					</header>

					<div class="post-content">
						<slot />
					</div>
				</article>
			</main>
		</div>
	</body>
</html>

<style>
	/* Container global */
	.container {
		max-width: 800px;
		margin: 0 auto;
		padding: 0 2rem;
		position: relative;
		z-index: 10;
	}

	/* Navigation */
	.post-nav {
		position: fixed;
		top: 2rem;
		left: 2rem;
		z-index: 100;
		display: flex;
		gap: 0.5rem;
	}

	.back-blog,
	.back-home {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		padding: 0.6rem 1rem;
		background: rgba(255, 255, 255, 0.1);
		border: 1px solid rgba(255, 255, 255, 0.2);
		border-radius: 50px;
		color: white;
		text-decoration: none;
		transition: all 0.3s ease;
		backdrop-filter: blur(10px);
		font-size: 0.85rem;
	}

	.back-blog:hover,
	.back-home:hover {
		background: rgba(255, 107, 53, 0.2);
		border-color: #ff6b35;
	}

	/* Article principal */
	.post-main {
		padding: 8rem 0 4rem;
		min-height: 100vh;
	}

	.post-article {
		background: rgba(255, 255, 255, 0.03);
		border: 1px solid rgba(255, 255, 255, 0.1);
		border-radius: 12px;
		overflow: hidden;
	}

	/* Image hero */
	.hero-image {
		aspect-ratio: 16/9;
		overflow: hidden;
	}

	.hero-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	/* Header de l'article */
	.post-header {
		padding: 2rem;
		text-align: center;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);
	}

	.post-meta {
		display: flex;
		justify-content: center;
		gap: 1rem;
		margin-bottom: 1.5rem;
		font-size: 0.85rem;
		color: #ff6b35;
		font-weight: 500;
	}

	.updated {
		color: rgba(255, 255, 255, 0.6);
	}

	.post-title {
		font-size: clamp(1.8rem, 4vw, 2.5rem);
		color: #ffffff;
		margin-bottom: 1rem;
		line-height: 1.3;
		font-weight: 700;
	}

	.post-description {
		font-size: 1.1rem;
		color: rgba(255, 255, 255, 0.8);
		line-height: 1.6;
		max-width: 500px;
		margin: 0 auto;
	}

	/* Contenu de l'article */
	.post-content {
		padding: 2rem;
		color: rgba(255, 255, 255, 0.9);
		line-height: 1.7;
		font-size: 1rem;
	}

	/* Typography markdown */
	.post-content :global(h2) {
		color: #ff6b35;
		font-size: 1.5rem;
		margin: 2rem 0 1rem;
		font-weight: 600;
		border-bottom: 1px solid rgba(255, 107, 53, 0.2);
		padding-bottom: 0.5rem;
	}

	.post-content :global(h3) {
		color: #ffffff;
		font-size: 1.3rem;
		margin: 1.5rem 0 0.75rem;
		font-weight: 600;
	}

	.post-content :global(h4),
	.post-content :global(h5),
	.post-content :global(h6) {
		color: #ffffff;
		margin: 1rem 0 0.5rem;
		font-weight: 600;
	}

	.post-content :global(p) {
		margin-bottom: 1.25rem;
		line-height: 1.7;
	}

	.post-content :global(a) {
		color: #ff6b35;
		text-decoration: underline;
		transition: color 0.3s ease;
	}

	.post-content :global(a:hover) {
		color: #ffffff;
	}

	.post-content :global(strong) {
		color: #ffffff;
		font-weight: 600;
	}

	.post-content :global(blockquote) {
		border-left: 3px solid #ff6b35;
		padding: 1rem 1.5rem;
		margin: 1.5rem 0;
		background: rgba(255, 107, 53, 0.05);
		border-radius: 0 8px 8px 0;
		font-style: italic;
	}

	.post-content :global(code) {
		background: rgba(255, 255, 255, 0.1);
		padding: 0.2rem 0.4rem;
		border-radius: 4px;
		font-family: 'SF Mono', 'Monaco', monospace;
		font-size: 0.9em;
		color: #ff6b35;
	}

	.post-content :global(pre) {
		background: rgba(0, 0, 0, 0.4);
		padding: 1.25rem;
		border-radius: 8px;
		overflow-x: auto;
		margin: 1.5rem 0;
		border: 1px solid rgba(255, 255, 255, 0.1);
	}

	.post-content :global(pre code) {
		background: none;
		padding: 0;
		color: rgba(255, 255, 255, 0.9);
	}

	.post-content :global(ul),
	.post-content :global(ol) {
		margin: 1rem 0 1.5rem;
		padding-left: 1.5rem;
	}

	.post-content :global(li) {
		margin-bottom: 0.5rem;
	}

	.post-content :global(img) {
		max-width: 100%;
		height: auto;
		border-radius: 8px;
		margin: 1.5rem 0;
		display: block;
		margin-left: auto;
		margin-right: auto;
	}

	.post-content :global(hr) {
		border: none;
		height: 1px;
		background: linear-gradient(90deg, transparent, rgba(255, 107, 53, 0.3), transparent);
		margin: 2rem 0;
	}

	/* Responsive */
	@media (max-width: 768px) {
		.container {
			padding: 0 1rem;
		}

		.post-nav {
			top: 1rem;
			left: 1rem;
			flex-direction: column;
		}

		.post-main {
			padding: 6rem 0 2rem;
		}

		.post-header {
			padding: 1.5rem;
		}

		.post-content {
			padding: 1.5rem;
		}

		.post-meta {
			flex-direction: column;
			gap: 0.25rem;
		}
	}
</style>
